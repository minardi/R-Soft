window.client={Models:{},Collections:{},Views:{},Routers:{},init:function(){"use strict";console.log("It's work!");new this.Views.CategorycollectionView,new this.Views.TableCollectionView}},$(document).ready(function(){"use strict";client.init()}),this.JST=this.JST||{},this.JST["app/scripts/templates/Category.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='category-name'>\r\n	"+(null==(__t=category_name)?"":__t)+"\r\n</div>\r\n\r\n<div class='category-content'>\r\n</div>\r\n\r\n";return __p},this.JST["app/scripts/templates/CategoryCollection.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<p>Your content here.</p>\r\n\r\n";return __p},this.JST["app/scripts/templates/TableCollectionView.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<p>Your content here.</p>\n\n";return __p},this.JST["app/scripts/templates/TableModelView.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=(null==(__t=id)?"":__t)+"\n\n";return __p},client.Models=client.Models||{},function(){"use strict";client.Models.CategoryModel=Backbone.Model.extend({defaults:{category_name:"noname"},view:void 0})}(),client.Collections=client.Collections||{},function(){"use strict";client.Collections.CategoryCollection=Backbone.Collection.extend({model:client.Models.CategoryModel,initialize:function(){var a=client.Models;this.add(new a.CategoryModel({category_name:"Dricks"})),this.add(new a.CategoryModel({category_name:"Dessetrs"})),this.add(new a.CategoryModel({category_name:"Entrees"})),this.add(new a.CategoryModel({category_name:"Sides"})),this.add(new a.CategoryModel({category_name:"Bar"}))}})}(),client.Views=client.Views||{},function(){"use strict";client.Views.CategoryView=Backbone.View.extend({model:void 0,tagName:"div",className:"category-container",template:_.template("<div class='category-name'><%= category_name %></div><div class='category-content'></div>"),render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}(),client.Views=client.Views||{},function(){"use strict";client.Views.CategorycollectionView=Backbone.View.extend({cattegories_obj:{},el:$("#menu-container"),initialize:function(){this.$el=$("#menu-container"),this.collection=new client.Collections.CategoryCollection,this.render(),Backbone.Mediator.pub("categories-ready",this.cattegories_obj)},render:function(){this.$el.html(""),this.collection.each(this.addOneCategory,this)},addOneCategory:function(a){var b=new client.Views.CategoryView({model:a});this.cattegories_obj[a.get("category_name")]=b.$el,this.$el.append(b.render().$el)}})}(),client.Models=client.Models||{},function(){"use strict";client.Models.TableModel=Backbone.Model.extend({defaults:{orderid:"",state:"vacant",activity:"false",capacity:"n/a",waiter:"n/a"}})}(),client.Collections=client.Collections||{},function(){"use strict";client.Collections.TableCollection=Backbone.Collection.extend({model:client.Models.TableModel})}(),client.Views=client.Views||{},function(){"use strict";client.Views.TableModelView=Backbone.View.extend({initialize:function(){this.model.on("change",this.render,this),Backbone.Mediator.sub("order-create",this.tableOccupy,this),Backbone.Mediator.sub("order-close",this.tableRelease,this),Backbone.Mediator.sub("changeactivity",this.tableActivity,this)},className:function(){return"vacant"===this.model.get("state")?"table_vacant_unactive":"table_occupied_unactive"},template:_.template("<%=id%>"),events:{click:"tableChoose"},tableActivity:function(a){this.model.id!=a&&(this.$el.className="table_vacant_active"===this.$el.className?"table_vacant_unactive":"table_occupied_unactive",this.model.set("activity","false"))},tableChoose:function(a){Backbone.Mediator.pub("table-active",this.model.orderid),Backbone.Mediator.pub("changeactivity",this.model.id),console.log("Event 'table-active' published"),this.model.set("activity","true"),this.$el.className="table_vacant_unactive"===this.$el.className?"table_vacant_active":"table_occupied_active",a.stopPropagation()},tableOccupy:function(a){"true"===this.model.get("activity")&&(this.model.set("state","occupied"),this.el.className="table_occupied_active",this.model.orderid=a,this.model.url="tables/"+this.model.id+".json",this.model.save({silent:"true"}))},tableRelease:function(){"true"===this.model.get("activity")&&(this.model.set("state","vacant"),this.el.className="table_vacant_active",this.model.orderid="",this.model.url="tables/"+this.model.id+".json",this.model.save({silent:"true"}))},render:function(){return console.log(this.model),this.$el.html(this.template(this.model.toJSON())),this}})}(),client.Views=client.Views||{},function(){"use strict";client.Views.TableCollectionView=Backbone.View.extend({initialize:function(){this.collection=new client.Collections.TableCollection,this.collection.url="tables.json",this.collection.fetch(),console.log("Fetching Collection Complete"),this.collection.once("sync",this.render,this)},el:$("#hall"),render:function(){console.log("Rendering Collection..."),this.collection.each(this.rendermodel,this),console.log(this.collection),console.log("Collection Rendered")},rendermodel:function(a){var b=new client.Views.TableModelView({model:a});this.$el.append(b.render().el)}})}();